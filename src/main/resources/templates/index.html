<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Spring Boot Thymeleaf + Spring Security</title>
    <div th:replace="fragments/header :: header-css"></div>
</head>
<body class="bg-transparent">
    <div th:replace="fragments/header :: header"></div>

    <div class="container py-3">

        <div class="row">
            <div class="row g-3 mb-3">
                <form th:action="@{/api/questions}" th:method="post" th:object="${questionDto}">
                    <div class="col-sm-6">
                        <label for="theme" class="form-label">Выберите тему</label>
                        <div class="row">
                            <div class="col">
                                <div class="input-group mr-3">
                                    <select type="text" th:field="*{theme}" id="theme" name="theme" list="themes" required>
                                        <datalist  id="themes">
                                            <div th:each="el : ${themes}">
                                                <option th:value="${el.getName()}" th:text="${el.getName()}"/>
                                            </div>
                                        </datalist>
                                    </select>
                                    <a th:href="@{/themes}" class="btn btn-primary mx-2">Редактировать темы</a>

                                </div>
                            </div>



                        </div>


                    </div>
                    <div class="col-sm-12">
                        <label for="question" class="form-label">Введите вопрос</label>
                        <div class="input-group">
                            <span class="input-group-text">?</span>
                            <input type="text" class="form-control" name="question" id="question" placeholder="" value="" required="">
                            <div class="invalid-feedback">
                                Поле вопроса не должно быть пустым!
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label for="answer1" class="form-label">Ответ 1</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" name="answer1"  id="answer1" placeholder="" value="" required="">
                                    <div class="input-group-text">
                                        <label class="form-check-label" for="flexRadioDefault1"/>
                                        <input class="form-check-input" type="radio" value="1" th:field="*{correct_answer}" id="flexRadioDefault1" >
                                    </div>
                                </div>
                            <div class="invalid-feedback">
                            Valid first name is required.
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label for="answer2" class="form-label">Ответ 2</label>
                        <div class="input-group">
                            <input type="text" class="form-control" name="answer2" id="answer2" placeholder="" value="" required="">
                            <div class="input-group-text">
                                <label class="form-check-label" for="flexRadioDefault2"/>
                                <input class="form-check-input" type="radio" value="2" th:field="*{correct_answer}" id="flexRadioDefault2" >
                            </div>
                        </div>
                        <div class="invalid-feedback">
                            Valid last name is required.
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label for="answer3" class="form-label">Ответ 3</label>
                        <div class="input-group">
                            <input type="text" class="form-control" name="answer3" id="answer3" placeholder="" required="">
                            <div class="input-group-text">
                                <label class="form-check-label" for="flexRadioDefault3"/>
                                <input class="form-check-input" type="radio" value="3" th:field="*{correct_answer}"  id="flexRadioDefault3" >
                            </div>
                        </div>
                        <div class="invalid-feedback">
                            Your username is required.
                        </div>
                    </div>
                    <div class="col-sm-6 mb-3">
                        <label for="answer4" class="form-label">Ответ 4</label>
                        <div class="input-group">
                            <input type="text" class="form-control" name="answer4" id="answer4" placeholder="">
                            <div class="input-group-text">
                                <label class="form-check-label" for="flexRadioDefault4"/>
                                <input class="form-check-input" type="radio" value="4" th:field="*{correct_answer}" id="flexRadioDefault4" >
                            </div>
                        </div>
                        <div class="invalid-feedback">
                            Please enter a valid email address for shipping updates.
                        </div>
                    </div>

                    <div class="input-group mb-3">
                        <input class="w-50 btn btn-primary btn-lg" type="submit" value="Добавить вопрос"></input>
                    </div>
                </form>
            </div>
            <hr class="my-4">
        <div class="row py-3">
        <h2 class="display-6 text-center mb-4">Список вопросов</h2>
            <div class="table-responsive">
                <table class="table text-center">
                    <thead>
                    <tr>
                        <th style="width: 20%;">Вопрос</th>
                        <th style="width: 20%;">Ответ 1</th>
                        <th style="width: 20%;">Ответ 2</th>
                        <th style="width: 20%;">Ответ 3</th>
                        <th style="width: 20%;">Ответ 4</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="question : ${questions}" >
                        <td th:utext="${question.getQuestion()}" ></td>
                        <td th:utext="${question.getAnswer1()}" th:classappend="${question.getCorrect_answer()} == 1 ? 'correct-answer' : ''"></td>
                        <td th:utext="${question.getAnswer2()}" th:classappend="${question.getCorrect_answer()} == 2 ? 'correct-answer' : ''"></td>
                        <td th:utext="${question.getAnswer3()}" th:classappend="${question.getCorrect_answer()} == 3 ? 'correct-answer' : ''"></td>
                        <td th:utext="${question.getAnswer4()}" th:classappend="${question.getCorrect_answer()} == 4 ? 'correct-answer' : ''"></td>
                        <td>
                            <form th:method="post" th:action="@{/api/questions/delete/(id=${question.getId()})}">
                                <button type="submit" class="btn-close" aria-label="Close"/>
                            </form>

                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- /.container -->


    <div th:replace="fragments/footer :: footer"></div>
    </div>
</body>
<style>
    .correct-answer {
        border: 4px solid limegreen !important;
    }
    .form-check-input:checked {
        background-color: limegreen;
        border-color: limegreen;
    }
</style>
</html>